(this["webpackJsonpremainders-frontend"]=this["webpackJsonpremainders-frontend"]||[]).push([[0],{58:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(16),c=n.n(r),i=(n(58),n(19)),o=n(7),u=n(14),l=n.n(u),j=n(25),d=n.n(j),h={api_url:window.API_URL},b=h.api_url+"/api/v1",x=null,O=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:x}},e.prev=1,e.next=4,d.a.get("".concat(b,"/latest"),t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,d.a.get("".concat(b,"/search/").concat(t),n);case 3:return a=e.sent,console.log("search:"+a),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={getLatest:function(){return d.a.get("".concat(b,"/latest")).then((function(e){return e.data}))},getSearch:m,setToken:function(e){x="Bearer ".concat(e)},getAsyncLatest:O},g=n(87),f=n(88),v=n(51),w=n(90),y=n(86),k=n(1),S=function(e){var t=e.hLog,n=e.setUsername,a=e.setPass;return Object(k.jsxs)(w.a,{className:"position-center",onSubmit:t,children:[Object(k.jsxs)(w.a.Group,{className:"mb-3",children:[Object(k.jsx)(w.a.Label,{className:"mt-1",children:"K\xe4ytt\xe4j\xe4"}),Object(k.jsx)(w.a.Control,{id:"username",placeholder:"k\xe4ytt\xe4j\xe4nimi",onChange:function(e){var t=e.target;return n(t.value)}})]}),Object(k.jsxs)(w.a.Group,{className:"mb-3",children:[Object(k.jsx)(w.a.Label,{className:"mt-1",children:"Salasana"}),Object(k.jsx)(w.a.Control,{id:"password",type:"password",placeholder:"salasana",onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(k.jsx)(y.a,{id:"login",className:"mb-3",type:"submit",children:"Kirjaudu"})]})},N=n(91),C=function(e){var t=e.setShow,n=e.success,a=e.loginMsg;return n?n?Object(k.jsxs)(N.a,{variant:"success",onClose:function(){return t(!1)},transition:!0,dismissible:!0,children:[Object(k.jsx)(N.a.Heading,{children:"Onnistui"}),Object(k.jsx)("p",{children:a})]}):void 0:Object(k.jsxs)(N.a,{variant:"danger",onClose:function(){return t(!1)},dismissible:!0,children:[Object(k.jsx)(N.a.Heading,{children:"Virhe!"}),Object(k.jsx)("p",{children:a})]})},L=function(e){var t=e.hLog,n=e.setUsername,a=e.setPass,s=e.user,r=e.show,c=e.setShow,i=e.success,o=e.loginMsg;return Object(k.jsxs)(g.a,{id:"actionform",children:[Object(k.jsx)(f.a,{children:!0===r&&Object(k.jsx)(C,{setShow:c,success:i,loginMsg:o})}),Object(k.jsx)(f.a,{children:Object(k.jsx)(v.a,{children:null===s&&Object(k.jsx)(S,{hLog:t,setUsername:n,setPass:a})})})]})},_=n(92),A=function(e){var t=e.rm,n=e.idx;return Object(k.jsx)("div",{children:Object(k.jsx)(_.a,{children:Object(k.jsxs)(_.a.Body,{children:[Object(k.jsxs)(_.a.Text,{className:"text-center",children:[n+1,"."]}),Object(k.jsxs)(_.a.Text,{children:[Object(k.jsx)("strong",{children:"Vastaanottaja:"})," ",t.to]}),Object(k.jsxs)(_.a.Text,{children:[Object(k.jsx)("strong",{children:"Aihe:"})," ",t.title]}),Object(k.jsxs)(_.a.Text,{children:[Object(k.jsx)("strong",{children:"Muistutus:"}),Object(k.jsx)("br",{})," ",t.message]}),Object(k.jsxs)(_.a.Text,{children:[Object(k.jsx)("strong",{children:"Generoitu:"})," ",t.updated_at]})]})})})},T=function(e){var t=e.rem;return Array.isArray(t)?Object(k.jsx)("div",{children:Object(k.jsx)(g.a,{className:"cardContainer",children:Object(k.jsx)(f.a,{xs:1,md:2,lg:3,className:"g-4",children:t.map((function(e,t){return Object(k.jsx)(v.a,{children:Object(k.jsx)(A,{rm:e,idx:t})},t)}))})})}):Object(k.jsx)("div",{children:Object(k.jsx)(g.a,{children:Object(k.jsx)(f.a,{xs:1,md:2,lg:3,className:"g-4",children:Object(k.jsx)(v.a,{children:Object(k.jsx)(A,{rm:[{to:"testivastaanottaja",title:"testikortti",message:"Jos n\xe4et t\xe4m\xe4n viestin, ohjelma ei saa dataa palvelimelta",updated_at:new Date}],idx:0})})})})})},U=n(89),I=function(e){var t=e.search,n=e.setFlt;return Object(k.jsxs)(w.a,{onSubmit:t,children:[Object(k.jsxs)(w.a.Group,{className:"mb-3",controlId:"searchFunc",children:[Object(k.jsx)(w.a.Label,{children:"Hae"}),Object(k.jsx)(w.a.Control,{id:"ctrl",type:"text",placeholder:"hakuteksti",onChange:function(e){var t=e.target;return n(t.value)}})]}),Object(k.jsx)(y.a,{variant:"primary",type:"submit",children:"Submit"})]})},M=function(e){var t=e.user;return Object(k.jsx)(g.a,{children:Object(k.jsxs)("p",{className:"text-light",id:"logged",children:["Kirjautuneena"," ",t.uname," "]})})},P=function(e){var t=e.user,n=e.search,a=e.setFlt,s=e.logout;return Object(k.jsx)(U.a,{className:"navbar fixed-top navbar-light bg-secondary",children:Object(k.jsxs)(g.a,{children:[Object(k.jsx)(U.a.Brand,{className:"text-light",href:"#home",children:"Muistutusten selaus"}),Object(k.jsx)(U.a.Toggle,{}),Object(k.jsxs)(U.a.Collapse,{className:"justify-content-end",children:[null!==t&&Object(k.jsx)(M,{user:t}),null!==t&&Object(k.jsx)(I,{search:n,setFlt:a}),Object(k.jsx)("p",{children:" "}),null!==t&&Object(k.jsx)(y.a,{className:"text-light ml-5",onClick:s,children:"Kirjaudu ulos"})]})]})})},F=function(){return Object(k.jsxs)("footer",{children:[Object(k.jsx)("p",{className:"foottext",children:"Riveria"}),Object(k.jsxs)("p",{children:["Photo by"," ",Object(k.jsx)("a",{href:"https://unsplash.com/@freegraphictoday?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText",children:"AbsolutVision"})," ","on"," ",Object(k.jsx)("a",{href:"https://unsplash.com/@freegraphictoday?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText",children:"Unsplash"})]})]})},J=h.api_url+"/login",B=function(){var e=Object(i.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post(J,t);case 2:return n=e.sent,e.abrupt("return",n.data.token);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G={login:B},K=function(e){"Request failed with status code 401"===e.message?(console.log(e),window.alert("Istunto vanhentunut")):"Network Error"===e.message?window.alert("Yhteys ei toimi"):console.log(e.message)},V=(n(82),n(83),function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(""),c=Object(o.a)(r,2),u=c[0],j=c[1],d=Object(a.useState)(""),h=Object(o.a)(d,2),b=h[0],x=h[1],O=Object(a.useState)(""),m=Object(o.a)(O,2),g=m[0],f=m[1],v=Object(a.useState)(null),w=Object(o.a)(v,2),y=w[0],S=w[1],N=Object(a.useState)(!1),C=Object(o.a)(N,2),_=C[0],A=C[1],U=Object(a.useState)(!1),I=Object(o.a)(U,2),M=I[0],J=I[1],B=Object(a.useState)(""),V=Object(o.a)(B,2),D=V[0],E=V[1];Object(a.useEffect)((function(){var e=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.localStorage.getItem("loggedUser"))){e.next=9;break}return n=JSON.parse(t),S(n),p.setToken(n.token),e.next=7,p.getAsyncLatest();case 7:a=e.sent,s(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var H=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={uname:b,token:""},e.next=5,G.login({username:b,password:g});case 5:return n.token=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),p.setToken(n.token),S(n),x(""),f(""),e.next=13,p.getAsyncLatest();case 13:a=e.sent,s(a),E("Olet nyt kirjautunut!"),J(!0),A(!0),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),E("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4tunnus tai salasana!"),J(!1),A(!0);case 25:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){window.localStorage.removeItem("loggedUser"),window.location.reload()};return Object(k.jsxs)("div",{className:"App",children:[Object(k.jsx)(P,{user:y,search:function(e){e.preventDefault(),p.getSearch(u).then((function(e){s(e)})).catch((function(e){K(e),R()}))},setFlt:j,logout:R}),Object(k.jsx)(L,{hLog:H,setUsername:x,setPass:f,user:y,setShow:A,show:_,success:M,loginMsg:D}),null!==y&&Object(k.jsx)(T,{rem:n}),Object(k.jsx)(F,{})]})});c.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(V,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.bff828e7.chunk.js.map